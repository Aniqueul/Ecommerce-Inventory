<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Listing</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="products.js"></script>
</head>
<body>
    <header>
        <h1>Product Listing</h1>
        <div class="header-right">
            <button id="filterToggle" class="icon-button">
                <img src="images/filter.jpg" alt="Filter">
            </button>
            <button id="searchButton" class="icon-button">
                <img src="images/search.png" alt="Search">
            </button>
        </div>
        <button class="add-product" onclick="openAddProductModal()">Add Product</button>
    </header>

    <div id="filterContainer" class="filters hidden">
        <input type="text" id="searchCategory" placeholder="Search by category">
        <input type="number" id="minPrice" placeholder="Min Price">
        <input type="number" id="maxPrice" placeholder="Max Price">
        <button onclick="fetchProducts()">Apply Filters</button>
    </div>

    <div class="product-container" id="productList"></div>
    <!-- Add Product Button -->

<!-- Modal for Adding Product -->
<div id="addProductModal" style="display: none;">
    <h2>Add New Product</h2>
    <input type="text" id="productName" placeholder="Product Name">
    <input type="number" id="productPrice" placeholder="Price">
    <input type="text" id="productCategory" placeholder="Category">
    <input type="number" id="productStock" placeholder="Stock">
    <button onclick="addProduct()">Submit</button>
    <button onclick="closeAddProductModal()">Cancel</button>
</div>

    <script>
        document.addEventListener("DOMContentLoaded", fetchProducts);

        function fetchProducts() {
            fetch("http://localhost:5000/products")
                .then(response => response.json())
                .then(products => {
                    const productList = document.getElementById("productList");
                    productList.innerHTML = "";
                    products.forEach(product => {
                        const productCard = document.createElement("div");
                        productCard.classList.add("product-card");
                        productCard.innerHTML = `
                            <img src="${product.image || 'default-image.jpg'}" alt="${product.name}">
                            <h3>${product.name}</h3>
                            <p><strong>Price:</strong> $${product.price}</p>
                            <p><strong>Category:</strong> ${product.category}</p>
                            <p><strong>Stock:</strong> ${product.stock > 0 ? 'Available' : 'Out of Stock'}</p>
                            <div class="product-actions">
                                <button class="edit-product">Edit</button>
                                <button class="delete-product">Delete</button>
                            </div>
                        `;
                        productList.appendChild(productCard);
                    });
                })
                .catch(error => console.error("Error fetching products:", error));
        }
    </script>
</body>
</html>
